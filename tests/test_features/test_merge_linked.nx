// Test with linked nodes

struct Node 
    data: int,
    next: ref Node
end

let n1: Node = Node(1, null)
let n2: Node = Node(2, null)
let n3: Node = Node(3, null)
let n4: Node = Node(4, null)

// Two lists: 1->3 and 2->4
n1.next = n3
n2.next = n4

func print_list(head: ref Node) 
    let current: ref Node = head
    while current != null do
        print(current.data)
        current = current.next
    end
end

func merge(l1: ref Node, l2: ref Node) -> ref Node
    if l1 == null then
        return l2
    end
    if l2 == null then
        return l1
    end
    
    if l1.data < l2.data then
        l1.next = merge(l1.next, l2)
        return l1
    else
        l2.next = merge(l1, l2.next)
        return l2
    end
end

print("List 1:")
print_list(n1)
print("List 2:")
print_list(n2)

print("Merging...")
let result: ref Node = merge(n1, n2)

print("Result:")
print_list(result)
