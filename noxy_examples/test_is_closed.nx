
print("Testing Channel is_closed...")

let ch: any = make_chan(2)

print("Closed initially?", chan_is_closed(ch)) // Expected: false

chan_send(ch, 1)
chan_close(ch)

print("Closed after close(ch) but with data?", chan_is_closed(ch)) // Expected: true
print("Double close safety test...")
chan_close(ch)
print("Still true?", chan_is_closed(ch)) // Expected: true

// Recv value
print("Recv value:", chan_recv(ch)) // 1
print("Closed now (empty)?", chan_is_closed(ch)) // Expected: true

print("Recv closed:", chan_recv(ch)) // null

print("Testing is_closed passed.")
