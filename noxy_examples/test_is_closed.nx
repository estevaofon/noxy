
print("Testing Channel is_closed...")

let ch: any = make_chan(2)

print("Closed initially?", is_closed(ch)) // Expected: false

send(ch, 1)
close(ch)

print("Closed after close(ch) but with data?", is_closed(ch)) // Expected: true
print("Double close safety test...")
close(ch)
print("Still true?", is_closed(ch)) // Expected: true

// Recv value
print("Recv value:", recv(ch)) // 1
print("Closed now (empty)?", is_closed(ch)) // Expected: true

print("Recv closed:", recv(ch)) // null

print("Testing is_closed passed.")
